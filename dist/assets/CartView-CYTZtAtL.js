import{d as K,r as _,c as S,b as x,e as w,f as e,t as h,u as k,j as L,F as A,n as O,h as T,v as P,k as U,s as z,x as I,l as Q,L as j,_ as Z}from"./index-CU1i9eHC.js";import{u as J}from"./cartStore-BV425wUz.js";import{_ as W}from"./GSpinner-z3c0EKQI.js";/* empty css                                                                    */class g{constructor(s=0,a="Network Error"){this.status=s,this.text=a}}const Y=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,s)=>Promise.resolve(localStorage.setItem(t,s)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},c={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Y()},V=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},G=(t,s="https://api.emailjs.com")=>{if(!t)return;const a=V(t);c.publicKey=a.publicKey,c.blockHeadless=a.blockHeadless,c.storageProvider=a.storageProvider,c.blockList=a.blockList,c.limitRate=a.limitRate,c.origin=a.origin||s},H=async(t,s,a={})=>{const i=await fetch(c.origin+t,{method:"POST",headers:a,body:s}),r=await i.text(),d=new g(i.status,r);if(i.ok)return d;throw d},q=(t,s,a)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!s||typeof s!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!a||typeof a!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},X=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},R=t=>t.webdriver||!t.languages||t.languages.length===0,B=()=>new g(451,"Unavailable For Headless Browser"),tt=(t,s)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof s!="string")throw"The BlockList watchVariable has to be a string"},et=t=>{var s;return!((s=t.list)!=null&&s.length)||!t.watchVariable},st=(t,s)=>t instanceof FormData?t.get(s):t[s],$=(t,s)=>{if(et(t))return!1;tt(t.list,t.watchVariable);const a=st(s,t.watchVariable);return typeof a!="string"?!1:t.list.includes(a)},F=()=>new g(403,"Forbidden"),ot=(t,s)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(s&&typeof s!="string")throw"The LimitRate ID has to be a non-empty string"},at=async(t,s,a)=>{const i=Number(await a.get(t)||0);return s-Date.now()+i},E=async(t,s,a)=>{if(!s.throttle||!a)return!1;ot(s.throttle,s.id);const i=s.id||t;return await at(i,s.throttle,a)>0?!0:(await a.set(i,Date.now().toString()),!1)},M=()=>new g(429,"Too Many Requests"),rt=async(t,s,a,i)=>{const r=V(i),d=r.publicKey||c.publicKey,m=r.blockHeadless||c.blockHeadless,u=r.storageProvider||c.storageProvider,f={...c.blockList,...r.blockList},v={...c.limitRate,...r.limitRate};return m&&R(navigator)?Promise.reject(B()):(q(d,t,s),X(a),a&&$(f,a)?Promise.reject(F()):await E(location.pathname,v,u)?Promise.reject(M()):H("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:d,service_id:t,template_id:s,template_params:a}),{"Content-type":"application/json"}))},it=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},nt=t=>typeof t=="string"?document.querySelector(t):t,lt=async(t,s,a,i)=>{const r=V(i),d=r.publicKey||c.publicKey,m=r.blockHeadless||c.blockHeadless,u=c.storageProvider||r.storageProvider,f={...c.blockList,...r.blockList},v={...c.limitRate,...r.limitRate};if(m&&R(navigator))return Promise.reject(B());const y=nt(a);q(d,t,s),it(y);const p=new FormData(y);return $(f,p)?Promise.reject(F()):await E(location.pathname,v,u)?Promise.reject(M()):(p.append("lib_version","4.4.1"),p.append("service_id",t),p.append("template_id",s),p.append("user_id",d),H("/api/v1.0/email/send-form",p))},ct={init:G,send:rt,sendForm:lt,EmailJSResponseStatus:g},dt={class:"md:flex md:gap-10 md:items-start"},ut={class:"flex-grow"},mt={class:"font-bold text-primary"},pt={class:"text-sm mt-10 mb-10"},ft={class:"flex-grow flex items-center gap-4"},bt={class:"w-[100px] shrink-0 h-[150px] overflow-hidden rounded-lg"},ht=["src","alt"],vt={class:"space-y-1"},yt={class:"font-bold text-md"},gt={class:"text-xs"},_t={class:"flex items-center gap-6 justify-between"},xt={class:"shrink-0 flex rounded-md overflow-hidden"},wt=["onClick","disabled"],kt=["onUpdate:modelValue"],Lt=["onClick"],Tt={class:"shrink-0 min-w-[80px] text-center"},Pt=["onClick"],jt={class:"p-4 bg-[#3f3f3f] md:w-[25%] min-w-[200px] shrink-0 sticky top-20"},Vt={class:"text-sm space-y-2 mb-4"},Ct={class:"space-y-1"},St={class:"space-y-1"},Ht={key:0,class:"text-red-500 text-sm mt-2"},qt={class:"flex justify-between mb-4"},Rt={class:"text-sm space-y-1 text-right"},Bt={class:"font-semibold"},$t={class:"flex justify-center"},Ft=K({__name:"CartView",setup(t){const s=Q(),a=_(""),i=_(""),r=J(),d=l=>{l.quantity>1&&r.minusQuantity(l)},m=_(!1),u=_(""),f=S(()=>r.cartList.reduce((l,o)=>l+o.price*o.quantity,0)),v=()=>{const l=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;i.value===""?u.value="This field is required":l.test(i.value)?u.value="":u.value="Email is not valid."},y=l=>{r.addQuantity(l)},p=l=>{r.deleteProduct(l)},C=()=>f.value-f.value*5/100,N=S(()=>{let l=`
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Quantity</th>
          <th>Price</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
  `;return r.cartList.forEach(o=>{l+=`
      <tr>
        <td>${o.title}</td>
        <td>${o.quantity}</td>
        <td>$${o.price}</td>
        <td>$${o.quantity*o.price}</td>
      </tr>
    `}),l+=`
    </tbody>
  </table>
  `,l}),D=async()=>{const l="service_7r7rh1g",o="template_fewv8de",n="CH9DFf_jVWubP1l2H";if(i.value&&a.value)try{m.value=!0,await ct.send(l,o,{email:i.value,name:a.value,cartHTML:N.value,totalAmount:C()},n)&&(m.value=!1,j.success("Your order has been created. Please check your email!",{autoClose:4e3,closeButton:!0,theme:"colored"}),setTimeout(()=>{s.push({name:"HomeView"})},4e3)),m.value=!1}catch(b){j.error(b,{autoClose:2e3,closeButton:!0,theme:"colored"})}else j.error("Please enter complete information.",{autoClose:4e3,closeButton:!0,theme:"colored"})};return(l,o)=>(x(),w("div",dt,[e("div",ut,[o[6]||(o[6]=e("h1",{class:"text-2xl md:text-3xl font-bold mb-2"},"Shopping Bag",-1)),e("p",null,[e("span",mt,h(k(r).quantity)+" items",1),o[2]||(o[2]=L(" in your bag "))]),e("div",pt,[(x(!0),w(A,null,O(k(r).cartList,n=>(x(),w("div",{key:n.id,class:"md:flex items-center md:gap-6 border-b border-[#535353] py-10 space-y-4"},[e("div",ft,[e("div",bt,[e("img",{src:n.image,class:"w-full h-full object-cover",alt:n.title},null,8,ht)]),e("div",vt,[e("p",yt,h(n.title),1),e("p",gt,[o[3]||(o[3]=e("span",{class:"text-[#b5b5b5]"},"Size",-1)),o[4]||(o[4]=e("span",{class:"relative top-[-2px] ml-2 mr-2 text-xl font-bold"},".",-1)),L(h(n.size),1)])])]),e("div",_t,[e("div",xt,[e("button",{onClick:b=>d(n),class:"button_quantity button_quantity_prev",disabled:n.quantity<=1}," - ",8,wt),T(e("input",{"onUpdate:modelValue":b=>n.quantity=b,type:"text",class:"quantity_input pointer-events-none"},null,8,kt),[[P,n.quantity]]),e("button",{onClick:b=>y(n),class:"button_quantity"}," + ",8,Lt)]),e("div",Tt," $"+h(n.price*n.quantity),1),e("div",{class:"cursor-pointer hover:text-primary transition",onClick:b=>p(n)},o[5]||(o[5]=[e("i",{class:"fa-solid fa-x fa-xl"},null,-1)]),8,Pt)])]))),128))])]),e("div",jt,[o[12]||(o[12]=e("p",{class:"text-xl font-bold mb-1"},"SUMMARY",-1)),e("div",Vt,[e("div",Ct,[o[7]||(o[7]=e("label",{for:"name"},"Name:",-1)),T(e("input",{"onUpdate:modelValue":o[0]||(o[0]=n=>a.value=n),type:"text",id:"name",name:"name",class:"w-full h-7 px-2"},null,512),[[P,a.value]])]),e("div",St,[o[8]||(o[8]=e("label",{for:"email"},[L("Email: "),e("span",{class:"text-red-500"},"*")],-1)),T(e("input",{"onUpdate:modelValue":o[1]||(o[1]=n=>i.value=n),type:"text",id:"email",name:"email",class:"w-full h-7 px-2",onBlur:v},null,544),[[P,i.value]]),u.value?(x(),w("div",Ht,h(u.value),1)):U("",!0)])]),e("div",qt,[o[10]||(o[10]=e("div",{class:"text-sm space-y-1"},[e("p",null,"Cart Subtotal"),e("p",null,"Discount"),e("p",{class:"font-semibold text-primary"},"Cart Total")],-1)),e("div",Rt,[e("p",null,"$"+h(f.value),1),o[9]||(o[9]=e("p",null,"5%",-1)),e("p",Bt,h(C()),1)])]),e("div",$t,[z(k(W),{loading:m.value,type:"button","custom-class":"h-full px-3 bg-primary text-sm",onClick:D},{text:I(()=>o[11]||(o[11]=[e("span",null,"Checkout",-1)])),_:1},8,["loading"])])])]))}}),Kt=Z(Ft,[["__scopeId","data-v-0464d664"]]);export{Kt as default};
